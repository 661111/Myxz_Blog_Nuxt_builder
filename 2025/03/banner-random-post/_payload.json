[{"data":1,"prerenderedAt":134},["ShallowReactive",2],{"/2025/03/banner-random-post":3,"surround-/2025/03/banner-random-post":123},{"id":4,"title":5,"body":6,"categories":99,"date":101,"description":102,"draft":103,"extension":104,"image":105,"meta":106,"navigation":107,"path":108,"readingTime":109,"recommend":114,"references":114,"seo":115,"stem":116,"tags":117,"type":114,"updated":121,"__hash__":122},"content/posts/2025/03/banner random post.md","Banner随机文章展示(轻笑同款)",{"type":7,"value":8,"toc":85},"minimark",[9,14,18,22,32,43,50,57,66,70,78,82],[10,11,13],"h2",{"id":12},"_1前言","1.前言",[15,16,17],"p",{},"为了把lighthouse的性能优化到极致，所以采用了这种轻笑方案的随机banner来优化",[10,19,21],{"id":20},"_2添加hometop","2.添加hometop",[23,24,26,27,31],"h3",{"id":25},"_1在-blogrootthemessxiaohescriptshelpers中新建home_random_postjs","1.在 ",[28,29,30],"span",{},"BlogRoot","\\themes\\sxiaohe\\scripts\\helpers中新建home_random_post.js:",[33,34,40],"pre",{"className":35,"code":37,"language":38,"meta":39},[36],"language-JS","hexo.extend.generator.register('thePosts', function (locals) {\n    const jsonData = locals.posts\n      .filter(post => post.random !== false)\n      .map(post => {\n        return {\n          title: post.title || \"暂无标题\",\n          abbrlink: post.abbrlink,\n          image: post.cover,\n          description: post.description || \"暂无简介\"\n        };\n      });\n  \n    return {\n      path: 'random.json',\n      data: JSON.stringify(jsonData)\n    };\n  });\n  \n","JS","",[41,42,37],"code",{"__ignoreMap":39},[23,44,46,47,49],{"id":45},"_2在-blogrootthemesbutterflylayoutincludes中新建hometoppug","2.在 ",[28,48,30],{},"\\themes\\butterfly\\layout\\includes中新建hometop.pug：",[51,52,54],"alert",{"type":53},"question",[15,55,56],{},"提示：如果在页面中添加js文件，会导致浏览器一直读取js，从而让用户无法看到页面内容，所以这里采用pug内嵌js文件展示出来",[33,58,64],{"className":59,"code":61,"filename":62,"language":63,"meta":39},[60],"language-pug","#home_top\n  .home_top_group\n    #homeTopGroup.homeTopGroup\n      .left-arrow-tip\n      .right-arrow-tip\n      .category_group\n          .category_item\n            a.category_button(href=\"/archives/\",style=\"background:linear-gradient(to right,#00868Bdb,#3fc1c9db)\")\n              span.category_button_text 归档\n              i.fas.fa-laptop-code\n          .category_item\n            a.category_button(href=\"/archives/2022/\",style=\"background:linear-gradient(to right, #0A5ABEdb, #2fcbffdb)\")\n              span.category_button_text 2022\n              i.fas.fa-lightbulb\n      .top_post_group\n        //- 这下面是原来固定的写法\n        //- if site.data.slider\n        //-   each i in site.data.slider\n        //-     .top_post_item\n        //-       .post_cover\n        //-         a(href=url_for(i.link) title=i.title)\n        //-           img.post_bg.entered.loaded(src=url_for(i.cover))\n        //-           .post_cover_info\n        //-             p.post_cover_text= i.description\n        //-       .post_info(onclick=`\"window.open(`+url_for(i.link)+`,\"_self\")\"`)\n        //-         a.article-title(href=url_for(i.link) title=i.title)= i.title\n      script(type='text/javascript')\n        | function getRandomElementsFromArray(arr, num) {\n        |   const totalElements = arr.length;\n        |   const selectedElements = new Set();\n        |   while (selectedElements.size \u003C num) {\n        |     const randomIndex = Math.floor(Math.random() * totalElements);\n        |     selectedElements.add(arr[randomIndex]);\n        |   }\n        |   return Array.from(selectedElements);\n        | }\n        | function renderingPosts(data){\n        |   const randomElements = getRandomElementsFromArray(data, 6);\n        |   const postsHtml = randomElements.map((i) => `\n        |     \u003Cdiv class=\"top_post_item\">\n        |       \u003Cdiv class=\"post_cover\">\n        |         \u003Ca href=\"/article/${i.abbrlink}.html\" title=\"${i.title}\">\n        |           \u003Cimg srcset class=\"post_bg entered loaded\" src=\"${i.cover}\" alt=\"${i.title}\" data-no-lazy>\n        |           \u003Cdiv class=\"post_cover_info\">\n        |             \u003Cp class=\"post_cover_text\">${i.description}\u003C/p>\n        |           \u003C/div>\n        |         \u003C/a>\n        |       \u003C/div>\n        |       \u003Cdiv class=\"post_info\" onclick=\"window.open('/article/${i.abbrlink}.html', '_self')\">\n        |         \u003Ca class=\"article-title\" href=\"/article/${i.abbrlink}.html\" title=\"${i.title}\">${i.title}\u003C/a>\n        |       \u003C/div>\n        |     \u003C/div>`).join('');\n        |   document.querySelector(\"#homeTopGroup>.top_post_group\").innerHTML = postsHtml\n        | }\n        | if(!sessionStorage.getItem(\"postsInfo\")){\n        |   fetch(\"/random.json\")\n        |   .then(res=>res.json())\n        |   .then(data=>{\n        |     console.log(1);\n        |     sessionStorage.setItem(\"postsInfo\", JSON.stringify(data));\n        |     renderingPosts(data);\n        |   })\n        | }else{\n        |   renderingPosts(JSON.parse(sessionStorage.getItem(\"postsInfo\")));\n        | }\n        | if(true){\n        |   const leftArrowTip = document.querySelector(\".left-arrow-tip\");\n        |   const rightArrowTip = document.querySelector(\".right-arrow-tip\");\n        |   const xscroll = document.getElementById(\"homeTopGroup\");\n        |   leftArrowTip.addEventListener(\"click\", function () {\n        |     xscroll.scrollTo({ left: 0, behavior: \"smooth\" }); // 回到最左边\n        |   });\n        |   rightArrowTip.addEventListener(\"click\", function () {\n        |     xscroll.scrollTo({ left: xscroll.scrollWidth, behavior: \"smooth\" }); // 回到最右边\n        |   });\n        |   function toggleArrowVisibility() {\n        |     // 计算滚动位置与容器宽度的差值\n        |     const scrollDiff = xscroll.scrollWidth - xscroll.scrollLeft - xscroll.clientWidth;\n        |     if (xscroll.scrollLeft === 0) {\n        |       // 在最左边，隐藏左箭头，显示右箭头\n        |       leftArrowTip.style.opacity = \"0\";\n        |       rightArrowTip.style.opacity = \"1\";\n        |       rightArrowTip.style.zIndex = \"1\";\n        |       leftArrowTip.style.zIndex = \"-1\";\n        |     } else if (scrollDiff \u003C= 1) {\n        |       // 在最右边，隐藏右箭头，显示左箭头\n        |       rightArrowTip.style.opacity = \"0\";\n        |       leftArrowTip.style.opacity = \"1\";\n        |       leftArrowTip.style.zIndex = \"1\";\n        |       rightArrowTip.style.zIndex = \"-1\";\n        |     } else {\n        |       // 既不在最右边又不在最左边，显示两个箭头\n        |       leftArrowTip.style.opacity = \"1\";\n        |       rightArrowTip.style.opacity = \"1\";\n        |       leftArrowTip.style.zIndex = \"1\";\n        |       rightArrowTip.style.zIndex = \"1\";\n        |     }\n        |   }\n        |   function topPostScroll() {\n        |     if (document.getElementById(\"homeTopGroup\")) {\n        |       xscroll.addEventListener(\"mousewheel\", function (e) {\n        |         let v = -e.wheelDelta / 2;\n        |         xscroll.scrollLeft += v;\n        |         e.preventDefault();\n        |       }, false);\n        |       let isScrolling = false;\n        |       xscroll.addEventListener(\"scroll\", function scrollHandler() {\n        |         if (!isScrolling) {\n        |           isScrolling = true;\n        |           setTimeout(function () {\n        |             isScrolling = false;\n        |             toggleArrowVisibility();\n        |           }, 100);\n        |         }\n        |       });\n        |     }\n        |   }\n        |   toggleArrowVisibility();\n        |   topPostScroll();\n        | }\n        | try{\n        |   document.removeEventListener('pjax:complete', catalogActive);\n        |   document.addEventListener('pjax:complete', catalogActive);\n        | }catch(e){}\n","hometop.pug","pug",[41,65,61],{"__ignoreMap":39},[23,67,69],{"id":68},"_3在自定义css文件中添加","3.在自定义css文件中添加：",[33,71,76],{"className":72,"code":74,"language":75,"meta":39},[73],"language-CSS",":root{\n    --mj-white: #fff;\n    --mj-card-bg: rgba(255,255,255,0.67);\n    --mj-theme: #128adadb;\n    --mj-secondbg: #ededed;\n    --mj-card-border: #e3e8f7;\n    --style-border: 2px solid rgba(0, 255, 255, 0.6);\n    --anchor-border: 1px solid rgba(21, 158, 208, 0.8);\n    --style-hover-border: 2px solid var(--mj-theme);\n}\n[data-theme=dark] {\n    --mj-card-bg: rgba(0,0,0,0.6);\n    --style-border: 2px solid rgba(56,211,203,0.8);\n}\n/* home top */\n#home_top {\n    width: 100%;\n    margin-bottom: 20px;\n}\n.home_top_group {\n    border-radius: 11px;\n    overflow: auto;\n    width: 100%;\n    margin-bottom: 0;\n}\n.homeTopGroup {\n    display: flex;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    width: 100%;\n    overflow: hidden;\n    overflow-x: score;\n    border-radius: 11px;\n}\n.homeTopGroup::-webkit-scrollbar {\n    display: none;\n}\n\n.homeTopGroup .category_group{\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    min-width: 200px;\n    min-height: 166px;\n}\n.top_post_item>.post_cover>a{\n    display: block;\n}\n.homeTopGroup .category_item {\n    overflow: hidden;\n    transform: scale(1);\n    transition: .3s;\n    height: 48%;\n    border-radius: 12px;\n}\n.homeTopGroup .category_item a.category_button {\n    height: 100%;\n    width: 100%;\n    background: var(--mj-card-bg);\n    border-radius: 12px;\n    display: inline-block;\n    text-align: left;\n    line-height: 4em;\n    font-weight: 800;\n    font-size: 16px;\n    color: var(--mj-white);\n    transition: all .4s cubic-bezier(.39,.575,.565,1);\n    transform: scale(1);\n    overflow: hidden;\n}\n.category_button_text {\n    padding-left: 25px;\n}\na.category_button i {\n    font-size: 3rem;\n    opacity: .3;\n    position: absolute;\n    right: 15px;\n    top: 10%;\n    transition: .3s;\n    transform: rotate(-10deg);\n    /*width: 100px;\n    text-align: center;*/\n}\na.category_button:hover i {\n    opacity: .8;\n    transition: .8s;\n    transition-delay: .15s;\n    transform: scale(1.1)\n}\na.category_button:hover:after{\n    width: 3rem;\n    transition: .8s;\n}\na.category_button:after {\n    top: 45px;\n    width: 1rem;\n    left: 25px;\n    height: 2.5px;\n    background: var(--mj-white);\n    content: \"\";\n    border-radius: 1px;\n    position: absolute;\n    transition: .8s;\n}\n@media screen and (max-width: 1245px){\n  .homeTopGroup,.home_top_group {\n      border-radius: 0px;\n  }\n}\n@media screen and (max-width: 768px){\n  .homeTopGroup .category_group {\n    min-width: 130px!important;\n  }\n  #home_top {\n    width: calc(100% + 17px);\n  }\n  .home_top_group {\n      overflow: visible;\n  }\n  .homeTopGroup {\n      margin-left: -17px;\n      scrollbar-width: none;\n      width: calc(100% + 17px);\n  }\n  .homeTopGroup .category_group{\n      margin-left: 17px;\n  }\n}\n.top_post_group{\n    display: flex;\n    position: relative;\n}\n.top_post_group .top_post_item {\n    display: flex;\n    width: 200px;\n    height: 166px;\n    flex-direction: column;\n    align-items: flex-start;\n    margin-left: 8px;\n    background: var(--mj-card-bg);\n    border-radius: 12px;\n    overflow: hidden;\n    border: var(--style-border);\n    color: var(--text-highlight-color);\n    transition: 0.3s;\n}\n/* .top_post_group .top_post_item:first-child{\n    right: 0px;\n} */\n.top_post_group .top_post_item:hover {\n    border: var(--style-hover-border);\n    background: #128adadb;\n}\n.top_post_group .top_post_item .post_cover {\n    width: 100%;\n    height: 110px;\n    position: relative;\n}\n.top_post_group .top_post_item .post_cover img {\n    object-fit: cover;\n    width: 100%;\n    height: 110px;\n    background: var(--mj-secondbg);\n}\n.top_post_group .top_post_item .post_cover .post_cover_info {\n    position: absolute;\n    top: 0;\n    width: 101%;\n    height: 100%;\n    opacity: 0;\n    background-color: rgba(0,0,0,0.7) !important;\n    transition: all 0.3s ease;\n    display: flex;\n} \n.top_post_group .top_post_item:hover .post_cover .post_cover_info{\n    opacity: 1;\n}\n.top_post_group .top_post_item .post_cover .post_cover_info .post_cover_text{\n    color: #fff;\n    padding: 13px 14px;\n    font-size: 15px;\n    font-weight: 400;\n    margin: 0;\n    -webkit-line-clamp: 3;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n}\n.top_post_group .top_post_item .post_info a{\n    color: var(--mj-fontcolor) !important;\n    transition: 0;\n}\n.top_post_group .top_post_item:hover .post_info a{\n    color: var(--mj-white) !important;\n}\n.top_post_group .top_post_item .post_info {\n    padding: 6px 9px!important;\n    transition: .3s;\n    width: 100%;\n    height: 100%;\n}\n.top_post_group .top_post_item .post_info .article-title {\n    -webkit-line-clamp: 2;\n    overflow: hidden;\n    display: -webkit-box;\n    -webkit-box-orient: vertical;\n    line-height: 1.4;\n    justify-content: center;\n    align-items: flex-end;\n    align-content: center;\n    font-weight: 800;\n    font-size: 14px!important;\n    padding: 0!important;\n}\n","CSS",[41,77,74],{"__ignoreMap":39},[10,79,81],{"id":80},"_3后记","3.后记",[15,83,84],{},"对于一些需要这种方案的以及想要简洁风格的可以根据这篇文章进行修改。",{"title":39,"searchDepth":86,"depth":86,"links":87},4,[88,90,98],{"id":12,"depth":89,"text":13},2,{"id":20,"depth":89,"text":21,"children":91},[92,95,97],{"id":25,"depth":93,"text":94},3,"1.在 BlogRoot\\themes\\sxiaohe\\scripts\\helpers中新建home_random_post.js:",{"id":45,"depth":93,"text":96},"2.在 BlogRoot\\themes\\butterfly\\layout\\includes中新建hometop.pug：",{"id":68,"depth":93,"text":69},{"id":80,"depth":89,"text":81},[100],"博客魔改","2025-03-01 10:00","本文依照轻笑的部分内容，参考首页banner写法以及对首页banner添加鼠标滚动以及移动端滑动，通过CSS样式进行美化整个首页banner，此篇文章重点讲述了如何解决轻笑给的js内容在首页会出现不断加载的问题。",false,"md","https://sourceimage.s3.bitiful.net/img/default_cover_10.avif",{},true,"/2025/03/banner-random-post",{"text":110,"minutes":111,"time":112,"words":113},"6 min read",5.595,335700,1119,null,{"title":5,"description":102},"posts/2025/03/banner random post",[118,119,120],"hexo","butterfly","美化","2025-03-05 12:09","BvQDnw8gtfxiPAzgev0zUF659wsaHPDnkfM_Lk8W338",[124,129],{"title":125,"path":126,"stem":127,"date":128,"type":114,"children":-1},"轻笑底部美化","/2025/02/light-laugh-bottom-beautification-(remastered-icon-version)","posts/2025/02/Light Laugh Bottom Beautification (Remastered Icon Version)","2025-02-27 10:00",{"title":130,"path":131,"stem":132,"date":133,"type":114,"children":-1},"美化文章卡片显示数字","/2025/03/artice-sort","posts/2025/03/artice sort","2025-03-05 8:00",1756204741411]